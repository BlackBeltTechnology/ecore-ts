(function(){function i(e){var t=e.eContainer;return!t||t instanceof n.Resource?"/":i(t)+"/"+e.get("name")}function u(e){var n=e.eClass;if(n){var r=n.eAllStructuralFeatures();t.each(r,function(t){var n=t.get("name");if(n)if(t.isTypeOf("EAttribute"))e.has(n)||(e.values[n]=e._getDefaultAttributeValue(t));else{var r=e.values[n];r instanceof o?(r._setFeature(t),t.get("isContainment")&&r.each(function(t){t.eContainer=e})):e.has(n)||(e.values[n]=e._getDefaultReferenceValue(t))}})}}function a(e,n){if(!e.eClass)return;t.each(n,function(e,t){var n=this.eClass.getEStructuralFeature(t);n&&(n.get("upperBound")===1?this.set(t,e):this.get(t).addAll(e))},e)}function v(e){var t=e.EClass=new l({name:"EClass"});t.eClass=t;var n=new c({name:"EString"});e.EString=n;var r=new c({name:"EInteger"});e.EInteger=r;var i=new c({name:"EBoolean"});e.EBoolean=i;var s=e.EModelElement=new l({name:"EModelElement","abstract":!0});s.eClass=t;var o=e.ENamedElement=new l({name:"ENamedElement","abstract":!0});o.eClass=t,o.get("eSuperTypes").add(s);var a=e.EAttribute=new l({name:"EAttribute"});a.eClass=t;var f=new p({name:"iD",eType:i});f.eClass=a,e.EAttribute_iD=f,a.get("eStructuralFeatures").add(f);var d=e.EReference=new l({name:"EReference"});d.eClass=t;var v=new p({name:"isContainment",eType:i});v.eClass=a,e.EReference_isContainment=v;var m=new p({name:"container",eType:i});m.eClass=a,e.EReference_container=m;var g=new p({name:"resolveProxies",eType:i});g.eClass=a,e.EReference_resolveProxies=g;var y=new h({name:"eOpposite",lowerBound:0,upperBound:1,isContainment:!1,eType:d});y.eClass=d,e.EReference_eOpposite=y,d.get("eStructuralFeatures").add(v),d.get("eStructuralFeatures").add(m),d.get("eStructuralFeatures").add(g),d.get("eStructuralFeatures").add(y);var b=e.EPackage=new l({name:"EPackage"});b.eClass=t,b.get("eSuperTypes").add(o);var w=new p({name:"nsURI",eType:n});w.eClass=a,e.EPackage_nsURI=w;var E=new p({name:"nsPrefix",eType:n});E.eClass=a,e.EPackage_nsPrefix=E,b.get("eStructuralFeatures").add(w),b.get("eStructuralFeatures").add(E);var S=new p({name:"name",eType:n});S.eClass=a,e.ENamedElement_name=S,o.get("eStructuralFeatures").add(S);var x=new p({name:"abstract",lowerBound:0,upperBound:1,eType:i});x.eClass=a,e.EClass_abstract=x;var T=new p({name:"interface",eType:i});T.eClass=a,e.EClass_interface=T;var N=new h({name:"eStructuralFeatures",lowerBound:0,upperBound:-1,isContainment:!0});e.EClass_eStructuralFeatures=N,N.eClass=d;var C=new h({name:"eSuperTypes",lowerBound:0,upperBound:-1,isContainment:!1,eType:t});e.EClass_eSuperTypes=C,C.eClass=d,t.get("eSuperTypes")._setFeature(C);var k=new h({name:"eOperations",lowerBound:0,upperBound:-1,isContainment:!1});e.EClass_eOperations=k,k.eClass=d,t.get("eStructuralFeatures").add(x),t.get("eStructuralFeatures").add(T),t.get("eStructuralFeatures").add(N),t.get("eStructuralFeatures").add(C),t.get("eStructuralFeatures").add(k);var L=e.EClassifier=new l({name:"EClassifier","abstract":!0});L.eClass=t;var A=e.EDataType=new l({name:"EDataType"});A.eClass=t;var O=e.ETypedElement=new l({name:"ETypedElement","abstract":!0});O.eClass=t,O.get("eSuperTypes").add(o);var M=new p({name:"ordered",eType:i});M.eClass=a,e.ETypedElement_ordered=M;var _=new p({name:"unique",eType:i});_.eClass=a,e.ETypedElement_unique=_;var D=new p({name:"lowerBound",eType:r});D.eClass=a,e.ETypedElement_lowerBound=D;var P=new p({name:"upperBound",eType:r});P.eClass=a,e.ETypedElement_upperBound=P;var H=new p({name:"many",eType:i});H.eClass=a,e.ETypedElement_many=H;var B=new p({name:"required",eType:i});B.eClass=a,e.ETypedElement_required=B;var j=new h({name:"eType",eType:L});j.eClass=d,e.ETypedElement_eType=j,O.get("eStructuralFeatures").add(M),O.get("eStructuralFeatures").add(_),O.get("eStructuralFeatures").add(D),O.get("eStructuralFeatures").add(P),O.get("eStructuralFeatures").add(H),O.get("eStructuralFeatures").add(B),O.get("eStructuralFeatures").add(j);var F=e.EStructuralFeature=new l({name:"EStructuralFeature"});F.eClass=t,F.set("abstract",!0),F.set("interface",!1),F.get("eSuperTypes").add(O),N.set("eType",F),a.get("eSuperTypes").add(F),d.get("eSuperTypes").add(F);var I=new p({name:"changeable",eType:i});I.eClass=a,e.EStructuralFeature_changeable=I;var q=new p({name:"volatile",eType:i});q.eClass=a,e.EStructuralFeature_volatile=q;var R=new p({name:"transient",eType:i});R.eClass=a,e.EStructuralFeature_transient=R;var U=new p({name:"defaultValueLiteral",eType:n});U.eClass=a,e.EStructuralFeature_defaultValueLiteral=U;var z=new p({name:"defaultValue",eType:n});z.eClass=a,e.EStructuralFeature_defaultValue=z;var W=new p({name:"unsettable",eType:i});W.eClass=a,e.EStructuralFeature_unsettable=W;var X=new p({name:"derived",eType:i});X.eClass=a,e.EStructuralFeature_derived=X,F.get("eStructuralFeatures").add(I),F.get("eStructuralFeatures").add(q),F.get("eStructuralFeatures").add(R),F.get("eStructuralFeatures").add(z),F.get("eStructuralFeatures").add(U),F.get("eStructuralFeatures").add(W),F.get("eStructuralFeatures").add(X);var V=e.EOperation=new l({name:"EOperation"});V.eClass=t,V.get("eSuperTypes").add(O),k.set("eType",V);var $=e.EParameter=new l({name:"EParameter"});$.eClass=t,$.get("eSuperTypes").add(O);var J=new h({name:"eParameters",lowerBound:0,upperBound:-1,isContainment:!0,eType:$});e.EOperation_eParameters=J,J.eClass=d,V.get("eStructuralFeatures").add(J);var K=new l({name:"EEnum"});K.eClass=t,K.get("eSuperTypes").add(A),e.EEnum=K;var Q=new l({name:"EEnumLiteral"});Q.eClass=t,Q.get("eSuperTypes").add(o),e.EEnumLiteral=Q,n.eClass=A,r.eClass=A,i.eClass=A,L.get("eSuperTypes").add(o),t.get("eSuperTypes").add(L),A.get("eSuperTypes").add(L);var G=new h({name:"eClassifiers",lowerBound:0,upperBound:-1,isContainment:!0,eType:L});G.eClass=d,e.EPackage_eClassifiers=G,b.get("eStructuralFeatures").add(G);var Y=e.EFactory=new l({name:"EFactory"});Y.eClass=t,Y.get("eSuperTypes").add(s),e.EFactory=Y;var Z=new h({name:"eFactoryInstance",lowerBound:0,upperBound:1,eType:Y});Z.eClass=d,b.get("eStructuralFeatures").add(Z),e.EPackage_eFactoryInstance=Z;var et=new h({name:"eSubPackages",lowerBound:0,upperBound:-1,isContainment:!0,eType:b});et.eClass=d,b.get("eStructuralFeatures").add(et),e.EPackage_eSubPackages=et;var tt=new h({name:"ePackage",lowerBound:1,upperBound:1,eType:b,eOpposite:Z});tt.eClass=d,e.EFactory_ePackage=tt,Z.set("eOpposite",tt),Y.get("eStructuralFeatures").add(tt),u(t),u(s),u(o),u(L),u(A),u(O),u(F),u(a),u(d),u(V),u($),u(b),u(Y)}function b(){var e=new y("http://www.eclipse.org/emf/2002/Ecore");return e.add(n.EcorePackage),n.Registry.register(e),e}function E(e){var n=e.uri,r={},i=e.contents;if(i.length===1){var s=i[0];function o(e,n){var i=e.eClass,s=i.eAllStructuralFeatures();r[n]=e,t.each(s,function(t){var n=e.get(t.get("name"));if(n&&t.isTypeOf("EReference")&&t.get("isContainment"))if(t.get("upperBound")===1){var r=n.fragment();o(n,r)}else n.each(function(e){var t=n.indexOf(e),r=e.fragment();o(e,r)})})}var u=s.eClass.get("eIDAttribute")||null;u?o(s,s.get(u.name)):o(s,"/")}return r}var e=this,t=e._||require("underscore"),n={create:function(e){if(!e||!e.eClass)throw new Error("Cannot create EObject from undefined EClass");return new n.EObject({eClass:e})},createEPackage:function(e){return new f(e)},createEClass:function(e){return new l(e)},createEDataType:function(e){return new c(e)},createEAttribute:function(e){return new p(e)},createEReference:function(e){return new h(e)}};n.version="0.2.0",typeof exports!="undefined"?(typeof module!="undefined"&&module.exports&&(exports=module.exports=n),exports.Ecore=n):e.Ecore=n;var r=n.EObject=function(e){return e||(e={}),this.eClass=e.eClass,this.values={},u(this),this},s={has:function(e){return this.values.hasOwnProperty(e)||this._isStructuralFeature(e)},isSet:function(e){if(!this.has(e))return!1;var t=this.eClass;if(!t)return!1;var n=this.get(e);return n instanceof o?n.size()>0:n!==null},set:function(e,t){return typeof t!="undefined"&&this.has(e)&&(this.values[e]=t),this},get:function(e){var t=null;return this.has(e)&&(t=this.values[e]),typeof t=="function"?t():t},isTypeOf:function(e){return this.eClass?this.eClass.get("name")===e:!1},isKindOf:function(e){return this.eClass?t.any(this.eClass.eAllSuperTypes(),function(t){return t.get("name")===e}):!1},eResource:function(){return this.eContainer?this.eContainer instanceof n.Resource?this.eContainer:this.eContainer.eResource():null},eContents:function(){if(!this.eClass)return[];var e=this.eClass.eAllStructuralFeatures(),r=t.filter(e,function(e){return e.isTypeOf("EReference")&&e.get("isContainment")&&this.isSet(e.get("name"))},this);return t.flatten(t.map(r,function(e){var t=this.get(e.get("name"));return t instanceof n.EList?t._internal:t},this))},eURI:function(){var e=this.eResource(),t=this;return e.uri+"#"+this.fragment()},fragment:function(){var e=this.eContainer,t=this.eClass,r=t.get("eIDAttribute");if(!e)return null;if(r)return this.get(r.get("name"));if(this.isKindOf("EModelElement"))return i(this);var s;if(this.eContainer instanceof n.Resource)s="/";else{var o=this.eContainingFeature;if(o){s=this.eContainer.fragment()+"/@"+o.get("name");if(o.get("upperBound")!==1){var u=this.eContainer.get(o.get("name")).indexOf(this);s+="."+u}}}return s},_getDefaultAttributeValue:function(e){var t=e.get("eType"),n=e.get("upperBound");if(!n)return null;if(n!==1)return[];if(!t)return null;switch(t.get("name")){case"EBoolean":return!1;case"EInteger":return 0;default:return null}},_getDefaultReferenceValue:function(e){var t=e.get("upperBound");return t?t===1?null:new o(this,e):null},_initFeature:function(e){var t=e.get("name");e.isTypeOf("EAttribute")?this.values[t]=this._getDefaultAttributeValue(e):this.values[t]=this._getDefaultReferenceValue(e)},_isStructuralFeature:function(e){var n=this.eClass;if(!n)return!1;var r=n.eAllStructuralFeatures();if(!r)return!1;var i=t.find(r,function(t){return t.values?t.values.name===e:!1});return i?(t.has(this.values,e)||this._initFeature(i),!0):!1},eAllStructuralFeatures:function(){if(!this.has("eSuperTypes"))return[];var e=this.eAllSuperTypes(),n=t.flatten(t.map(e,function(e){return e.eAllStructuralFeatures()})),r=t.union(n,this.get("eStructuralFeatures")._internal);return t.isArray(r)?r:[]},eAllSuperTypes:function(){if(!this.has("eSuperTypes"))return[];var e=this.get("eSuperTypes")._internal;if(!e)return[];var n=t.union(e,t.flatten(t.map(e,function(e){return e.eAllSuperTypes()})));return t.isArray(n)?n:[]},getEStructuralFeature:function(e){return this.has("eStructuralFeatures")?t.find(this.eAllStructuralFeatures(),function(t){return t.get("name")===e}):null}};t.extend(r.prototype,s);var o=n.EList=function(e,t){return this._internal=[],this._owner=e,this._size=0,this._setFeature(t),this};o.prototype={_setFeature:function(e){e&&(this._feature=e,this._isContainment=this._feature.get("isContainment"))},add:function(e){return e?(this._isContainment&&(e.eContainingFeature=this._feature,e.eContainer=this._owner),this._size++,this._internal.push(e),this):this},addAll:function(e){return t.isArray(e)?(t.each(e,function(e){this.add(e)},this),this):this.add(e)},remove:function(e){var n=t.values(this._index);return this},size:function(){return this._size},at:function(e){return this._size<e?null:this._internal[e]},first:function(){return t.first(this._internal)},last:function(){return t.last(this._internal)},rest:function(e){return t.rest(this._internal,e)},each:function(e,n){return t.each(this._internal,e,n)},filter:function(e,n){return t.filter(this._internal,e,n)},find:function(e,n){return t.find(this._internal,e,n)},map:function(e,n){return t.map(this._internal,e,n)},reject:function(e,n){return t.reject(this._internal,e,n)},contains:function(e){return t.contains(this._internal,e)},indexOf:function(e){return t.indexOf(this._internal,e)}};var f=function(e){return e||(e={}),n.EcorePackage&&(this.eClass=n.EcorePackage.EPackage),this.values={},this.values.name=e.name,this.values.nsURI=e.nsURI,this.values.nsPrefix=e.nsPrefix,this.values.eClassifiers=new o(this),u(this),a(this,e),this};t.extend(f.prototype,s);var l=function(e){return e||(e={}),n.EcorePackage&&(this.eClass=n.EcorePackage.EClass),this.values={},this.values.name=e.name,this.values.abstract=e.abstract||!1,this.values.interface=e.interface||!1,this.values.eSuperTypes=new o(this),this.values.eStructuralFeatures=new o(this),u(this),a(this,e),this};t.extend(l.prototype,s);var c=function(e){return e||(e={}),n.EcorePackage&&(this.eClass=n.EcorePackage.EDataType),this.values={},this.values.name=e.name,u(this),a(this,e),this};t.extend(c.prototype,s);var h=function(e){return e||(e={}),n.EcorePackage&&(this.eClass=n.EcorePackage.EReference),this.values={},this.values.name=e.name,this.values.lowerBound=e.lowerBound||0,this.values.upperBound=e.upperBound||1,this.values.isContainment=e.isContainment||!1,this.values.eType=e.eType||null,this.values.eOpposite=e.eOpposite||null,u(this),a(this,e),this};t.extend(h.prototype,s);var p=function(e){return e||(e={}),n.EcorePackage&&(this.eClass=n.EcorePackage.EAttribute),this.values={},this.values.name=e.name,this.values.lowerBound=e.lowerBound||0,this.values.upperBound=e.upperBound||1,this.values.eType=e.eType||null,u(this),a(this,e),this};t.extend(p.prototype,s);var d=function(e){return e||(e={}),n.EcorePackage&&(this.eClass=n.EcorePackage.EFactory),this.values={},this.values.ePackage=e.ePackage,u(this),a(this,e),this};t.extend(d.prototype,s),n.EcorePackage=new f({name:"ecore"}),v(n.EcorePackage),n.EcorePackage.get("eClassifiers")._setFeature(n.EcorePackage.EPackage_eClassifiers),n.EcorePackage.eClass=n.EcorePackage.EPackage,n.EcorePackage.set("nsURI","http://www.eclipse.org/emf/2002/Ecore"),n.EcorePackage.set("nsPrefix","ecore"),n.EcorePackage.get("eClassifiers").add(n.EcorePackage.EModelElement),n.EcorePackage.get("eClassifiers").add(n.EcorePackage.ENamedElement),n.EcorePackage.get("eClassifiers").add(n.EcorePackage.EPackage),n.EcorePackage.get("eClassifiers").add(n.EcorePackage.EClassifier),n.EcorePackage.get("eClassifiers").add(n.EcorePackage.EClass),n.EcorePackage.get("eClassifiers").add(n.EcorePackage.EDataType),n.EcorePackage.get("eClassifiers").add(n.EcorePackage.ETypedElement),n.EcorePackage.get("eClassifiers").add(n.EcorePackage.EStructuralFeature),n.EcorePackage.get("eClassifiers").add(n.EcorePackage.EAttribute),n.EcorePackage.get("eClassifiers").add(n.EcorePackage.EReference),n.EcorePackage.get("eClassifiers").add(n.EcorePackage.EOperation),n.EcorePackage.get("eClassifiers").add(n.EcorePackage.EParameter),n.EcorePackage.get("eClassifiers").add(n.EcorePackage.EEnum),n.EcorePackage.get("eClassifiers").add(n.EcorePackage.EEnumLiteral),n.EcorePackage.get("eClassifiers").add(n.EcorePackage.EFactory),n.EcorePackage.get("eClassifiers").add(n.EcorePackage.EString),n.EcorePackage.get("eClassifiers").add(n.EcorePackage.EBoolean),n.EcorePackage.get("eClassifiers").add(n.EcorePackage.EInteger),n.EcoreFactory=new d,n.EcoreFactory.eClass=n.EcorePackage.EFactory,n.EcorePackage.set("eFactoryInstance",n.EcoreFactory),n.EcoreFactory.create=function(e,t){switch(e){case"EPackage":return n.createEPackage(t);case"EClass":return n.createEClass(t);case"EDataType":return n.createEDataType(t);case"EAttribute":return n.createEAttribute(t);case"EReference":return n.createEReference(t);default:return null}};var m=n.EcoreFactory;n.$=e.jQuery||e.Zepto||e.ender||null;var g={get:function(e,t,r){if(!n.$)return;return n.$.ajax({url:e,dataType:"json",success:t,error:r})},post:function(e,t,r,i){if(!n.$)return;return n.$.ajax({type:"POST",url:e,dataType:"json",data:t,success:r,error:i})}};n.JSON={parse:function(e,r){function s(e,n){return!e||!n?function(e){}:function(r){var s=r.get("name"),o=e[s];typeof o!="undefined"&&(r.isTypeOf("EAttribute")?n.set(s,o):r.get("isContainment")?r.get("upperBound")===1?n.set(s,a(o)):t.each(o||[],function(e){n.get(s).add(a(e))}):i.push({parent:n,feature:r,value:o}))}}function o(e){return e.substring(0,1)==="/"}function u(){function s(e,t,i,s){var u=i.$ref,a;o(u)?a=r[u]:a=n.Registry.getEObject(u),a&&(s?e.get(t.get("name")).add(a):e.set(t.get("name"),a))}var r=E(e);t.each(i,function(e){var n=e.parent,r=e.feature,i=e.value;r.get("upperBound")===1?s(n,r,i,!1):t.each(i,function(e){s(n,r,e,!0)})})}function a(e){var r;if(e&&e.eClass){var i=n.Registry.getEObject(e.eClass),o=i.eAllStructuralFeatures();r=n.create(i),t.each(o,s(e,r))}return r}var i=[],f=a(r);f&&(e.add(f),u())},toJSON:function(e){function i(e,t){var n=t.eResource(),i=e.eResource(),s=n!==i;if(!n||!i)return;r[n.uri]||(r[n.uri]=E(n));var o=r[n.uri];for(var u in o)if(o[u]===t)return s?n.uri+"#"+u:u;return null}function s(e,t){return!e||!t?function(){}:function(n){var r=n.get("name");if(!e.isSet(r))return;var s=e.get(r),u=n.get("upperBound")!==1;n.isTypeOf("EAttribute")?t[r]=s:n.get("isContainment")?u?(t[r]=[],s.each(function(e){t[r].push(o(e))})):t[r]=o(s):u?(t[r]=[],s.each(function(n){t[r].push({$ref:i(e,n),eClass:n.eClass.eURI()})})):t[r]={$ref:i(e,s),eClass:s.eClass.eURI()}}}function o(e){var n=e.eClass,r=n.eAllStructuralFeatures(),i={eClass:n.eURI()};return t.each(r,s(e,i)),i}var n=e.contents,r={};r[e.uri]=E(e);var u;if(n.length===1){var a=n[0];u=o(a)}return u}};var y=n.Resource=function(e){return this.uri=e,this.contents=[],this};y.prototype={clear:function(){return this.contents.length=0,this},add:function(e){return e&&(e.eContainer=this,this.contents.push(e)),this},addAll:function(e){return t.isArray(e)&&t.each(e,function(e){this.add(e)},this),this},getEObject:function(e){return e?E(this)[e]:null},each:function(e,n){return t.each(this.contents,e,n)},toJSON:function(){return n.JSON.toJSON(this)},parse:function(e){return n.JSON.parse(this,e),this},save:function(e,t){var n=this.toJSON();n&&g.post(this.uri,n,e,t)},load:function(e,t,n){var r=this,i=function(t){return r.parse(t),e(r)};return n?i(n):g.get(this.uri,i,t)}};var w=function(){var e;return w=function(){return e},w.prototype=this,e=new w,e.constructor=w,e.models={},e};w.prototype={register:function(e){return this.models[e.uri]=e,this},getEObject:function(e){var t=e.split("#"),n=t[0],r=this.models[n],i,s;t.length===2&&(i=t[1]);if(r&&i){var o=E(r);s=o[i]}return s}},n.Registry=new w,b()})();